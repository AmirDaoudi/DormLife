{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:24:50'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:24:50'
}
{
  length: 100,
  name: 'error',
  severity: 'FATAL',
  code: '28000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'miscinit.c',
  line: '755',
  routine: 'InitializeSessionUserId',
  level: 'error',
  message: 'Failed to connect to databases: role "postgres" does not exist',
  stack: 'error: role "postgres" does not exist\n' +
    '    at /Users/amir/Desktop/DormLife/backend/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at async DatabaseConnection.connect (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:70:22)\n' +
    '    at async runMigrations (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:11:5)',
  timestamp: '2025-08-27 23:24:50'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError: \n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:24:57'
}
{
  length: 100,
  name: 'error',
  severity: 'FATAL',
  code: '28000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'miscinit.c',
  line: '755',
  routine: 'InitializeSessionUserId',
  level: 'error',
  message: 'Failed to connect to databases: role "postgres" does not exist',
  stack: 'error: role "postgres" does not exist\n' +
    '    at /Users/amir/Desktop/DormLife/backend/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at DatabaseConnection.connect (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:70:22)\n' +
    '    at DormLifeServer.start (/Users/amir/Desktop/DormLife/backend/src/server.ts:158:7)',
  timestamp: '2025-08-27 23:24:57'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:29:12'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:29:12'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:29:12'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:29:12'
}
{
  code: 'ECONNREFUSED',
  level: 'error',
  message: 'Redis client error:',
  stack: 'AggregateError\n' +
    '    at internalConnectMultiple (node:net:1139:18)\n' +
    '    at afterConnectMultiple (node:net:1714:7)',
  timestamp: '2025-08-27 23:29:13'
}
{
  query: '-- Temperature votes table\n' +
    'CREATE TABLE temperature_votes (\n' +
    '    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n' +
    '    user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n' +
    '    zone_id UUID REFERENCES temperature_zones(id) ON DELETE CASCADE,\n' +
    '    temperature DECIMAL(4,1) NOT NULL,\n' +
    '    vote_weight DECIMAL(3,2) DEFAULT 1.00,\n' +
    '    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n' +
    '    \n' +
    '    UNIQUE(user_id, zone_id, DATE(created_at))\n' +
    ');',
  error: error: syntax error at or near "("
      at /Users/amir/Desktop/DormLife/backend/node_modules/pg/lib/client.js:545:17
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async DatabaseConnection.query (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:110:22)
      at async runMigrations (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:30:11) {
    length: 91,
    severity: 'ERROR',
    code: '42601',
    detail: undefined,
    hint: undefined,
    position: '414',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'scan.l',
    line: '1180',
    routine: 'scanner_yyerror'
  },
  level: 'error',
  message: 'Database query error:',
  timestamp: '2025-08-27 23:29:13'
}
{
  query: '-- Schools table\n' +
    'CREATE TABLE schools (\n' +
    '    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n' +
    '    name VARCHAR(255) NOT NULL,\n' +
    '    address TEXT,\n' +
    '    logo_url VARCHAR(500),\n' +
    "    timezone VARCHAR(50) DEFAULT 'UTC',\n" +
    "    settings JSONB DEFAULT '{}',\n" +
    '    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n' +
    '    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n' +
    ');',
  error: error: relation "schools" already exists
      at /Users/amir/Desktop/DormLife/backend/node_modules/pg/lib/client.js:545:17
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at DatabaseConnection.query (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:111:22)
      at Object.runMigrations [as default] (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:30:11)
      at DormLifeServer.start (/Users/amir/Desktop/DormLife/backend/src/server.ts:163:7) {
    length: 101,
    severity: 'ERROR',
    code: '42P07',
    detail: undefined,
    hint: undefined,
    position: undefined,
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'heap.c',
    line: '1203',
    routine: 'heap_create_with_catalog'
  },
  level: 'error',
  message: 'Database query error:',
  timestamp: '2025-08-27 23:30:29'
}
{
  query: '-- Users table\n' +
    'CREATE TABLE users (\n' +
    '    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n' +
    '    email VARCHAR(255) UNIQUE NOT NULL,\n' +
    '    password_hash VARCHAR(255) NOT NULL,\n' +
    '    full_name VARCHAR(255) NOT NULL,\n' +
    '    room_number VARCHAR(50),\n' +
    '    profile_photo_url VARCHAR(500),\n' +
    '    year VARCHAR(50),\n' +
    '    emergency_contact VARCHAR(255),\n' +
    '    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,\n' +
    "    role VARCHAR(50) DEFAULT 'student' CHECK (role IN ('student', 'admin', 'staff')),\n" +
    "    preferences JSONB DEFAULT '{}',\n" +
    '    is_verified BOOLEAN DEFAULT FALSE,\n' +
    '    verification_token VARCHAR(255),\n' +
    '    reset_token VARCHAR(255),\n' +
    '    reset_token_expires TIMESTAMP WITH TIME ZONE,\n' +
    '    last_login TIMESTAMP WITH TIME ZONE,\n' +
    '    is_active BOOLEAN DEFAULT TRUE,\n' +
    '    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n' +
    '    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n' +
    ');',
  error: error: relation "users" already exists
      at /Users/amir/Desktop/DormLife/backend/node_modules/pg/lib/client.js:545:17
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at DatabaseConnection.query (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:111:22)
      at Object.runMigrations [as default] (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:30:11)
      at DormLifeServer.start (/Users/amir/Desktop/DormLife/backend/src/server.ts:163:7) {
    length: 99,
    severity: 'ERROR',
    code: '42P07',
    detail: undefined,
    hint: undefined,
    position: undefined,
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'heap.c',
    line: '1203',
    routine: 'heap_create_with_catalog'
  },
  level: 'error',
  message: 'Database query error:',
  timestamp: '2025-08-27 23:30:29'
}
{
  query: '-- Temperature zones table\n' +
    'CREATE TABLE temperature_zones (\n' +
    '    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n' +
    '    name VARCHAR(100) NOT NULL,\n' +
    '    description TEXT,\n' +
    '    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,\n' +
    '    current_temperature DECIMAL(4,1),\n' +
    '    target_temperature DECIMAL(4,1),\n' +
    '    min_temperature DECIMAL(4,1) DEFAULT 65.0,\n' +
    '    max_temperature DECIMAL(4,1) DEFAULT 80.0,\n' +
    '    is_active BOOLEAN DEFAULT TRUE,\n' +
    '    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n' +
    '    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n' +
    ');',
  error: error: relation "temperature_zones" already exists
      at /Users/amir/Desktop/DormLife/backend/node_modules/pg/lib/client.js:545:17
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at DatabaseConnection.query (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:111:22)
      at Object.runMigrations [as default] (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:30:11)
      at DormLifeServer.start (/Users/amir/Desktop/DormLife/backend/src/server.ts:163:7) {
    length: 111,
    severity: 'ERROR',
    code: '42P07',
    detail: undefined,
    hint: undefined,
    position: undefined,
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'heap.c',
    line: '1203',
    routine: 'heap_create_with_catalog'
  },
  level: 'error',
  message: 'Database query error:',
  timestamp: '2025-08-27 23:30:29'
}
{
  query: '-- Create updated_at trigger function\n' +
    'CREATE OR REPLACE FUNCTION update_updated_at_column()\n' +
    'RETURNS TRIGGER AS $$\n' +
    'BEGIN\n' +
    '    NEW.updated_at = NOW();',
  error: error: unterminated dollar-quoted string at or near "$$
  BEGIN
      NEW.updated_at = NOW();"
      at /Users/amir/Desktop/DormLife/backend/node_modules/pg/lib/client.js:545:17
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at DatabaseConnection.query (/Users/amir/Desktop/DormLife/backend/src/database/connection.ts:111:22)
      at Object.runMigrations [as default] (/Users/amir/Desktop/DormLife/backend/src/database/migrate.ts:30:11)
      at DormLifeServer.start (/Users/amir/Desktop/DormLife/backend/src/server.ts:163:7) {
    length: 147,
    severity: 'ERROR',
    code: '42601',
    detail: undefined,
    hint: undefined,
    position: '112',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'scan.l',
    line: '1180',
    routine: 'scanner_yyerror'
  },
  level: 'error',
  message: 'Database query error:',
  timestamp: '2025-08-27 23:30:29'
}
